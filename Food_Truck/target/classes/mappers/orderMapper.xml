<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

	
<mapper namespace="com.foodtruck.dao.OrderDAO">

	<!-- 주문 정보 -->
	<select id="getOrder" resultMap="OrderMap">
		
		SELECT * FROM ORDERS
		<where> order_no=#{ordNo} </where>
	
	</select>
	
	<!-- 주문 리스트 -->
	<select id="getOrderList" resultMap="OrderMap">
		
		SELECT * FROM ORDERS
	
	</select>
	
	<!-- 비회원 주문번호로 주문내역보기 -->
	<select id="getNonmemberInfo" resultMap="OrderMap" parameterType="map">
	
		SELECT O.*,D.*,P.* FROM ORDERS O,ORDERDETAIL D,PRODUCT P
		<where>P.PROD_NO = D.PROD_NO AND O.ORD_NO = D.ORD_NO AND O.ORD_NO = #{ordNo} AND O.ORD_TEL = #{ordTel} </where>
		
	</select>	

	<!-- resultMap -->
	<resultMap type="OrderVO" id="OrderMap">
		<result column="ORD_NO" property="ordNo"/>
		<result column="ORD_NAME" property="ordName"/>
		<result column="ORD_TEL" property="ordTel"/>
		<result column="ORD_DATE" property="ordDate"/>
		<result column="ORD_RSV_DATE" property="ordRsvDate"/>
		<result column="ORD_DLV_YN" property="ordDlyYn"/>
		<result column="ORD_REQ" property="ordReq"/>
		<result column="SUM_PRICE" property="sumPrice"/>
		<result column="ORD_QTY" property="ordQty" />
		<result column="ORD_PRICE" property="ordPrice" />
		<result column="MEM_ID" property="memId"/>
		<result column="PROD_NAME" property="prodName" />
	</resultMap>



</mapper>